/*
 * Copyright (C) 2017-2019 Dremio Corporation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
@use "./focus";
@use "../../utilities/align";
@use "../../utilities/bg";
@use "../../utilities/border";
@use "../../utilities/flex";
@use "../../utilities/height";
@use "../../utilities/overflow";
@use "../../utilities/padding";
@use "../../utilities/rounded";
@use "../../utilities/width";

.form-control {
  @extend .align-baseline;
  @extend .bg-foreground;
  @extend .border;
  @extend .border-gray-100;
  @extend .border-solid;
  @extend .flex;
  @extend .flex-row;
  @extend .focus\:focus;
  @extend .h-4;
  @extend .items-center;
  @extend .overflow-hidden;
  @extend .p-05;
  @extend .rounded;
  @extend .w-full;
  box-sizing: border-box;
  font-size: inherit;
  outline: none;

  input {
    @extend .border-none;
    @extend .flex-1;
    @extend .h-full;
    appearance: none;
    background: transparent;
    outline: none;
  }

  &__prefix {
    background-color: var(--color--neutral--25);
    padding-block: 5px;
    margin-inline-start: -4px;
    margin-inline-end: 4px;
    padding-inline: 4px;
  }

  @at-root input#{&}:not([type="radio"]):not([type="checkbox"]) {
    padding-inline: 0.5em;
  }

  &:disabled,
  &[aria-disabled="true"] {
    @extend .bg-disabled;
    cursor: not-allowed;
  }

  &[type="checkbox"] {
    border-radius: 0.2em;
    width: 16px;
    height: 16px;

    &:checked {
      @extend .bg-brand-300;
      border: 1px solid var(--color--brand--300);
      &::after {
        background-image: url("data:image/svg+xml;base64,PHN2ZyBpZD0iaW50ZXJmYWNlL2NoZWNrYm94IiB2aWV3Qm94PSIwIDAgMTIgMTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xMC40Njk3IDAuOTY4OTQ2TDMuOTk5NjggNy40Mzg5NUwxLjUyOTY4IDQuOTY4OTVMMS40NDU2OCA0Ljg5NTk1QzEuMjkzNDcgNC43ODQzIDEuMTA0NzYgNC43MzQxNSAwLjkxNzIgNC43NTU1MUMwLjcyOTY0NCA0Ljc3Njg3IDAuNTU3MDQxIDQuODY4MTcgMC40MzM4MzggNS4wMTExOUMwLjMxMDYzNiA1LjE1NDIxIDAuMjQ1ODk3IDUuMzM4NDMgMC4yNTI1NCA1LjUyNzA5QzAuMjU5MTg0IDUuNzE1NzQgMC4zMzY3MjEgNS44OTQ5NSAwLjQ2OTY3OSA2LjAyODk1TDMuNDY5NjggOS4wMjg5NUwzLjU1MzY4IDkuMTAxOTVDMy42OTgxNSA5LjIwODY2IDMuODc2MTIgOS4yNTk5OCA0LjA1NTIzIDkuMjQ2NTlDNC4yMzQzNCA5LjIzMzE5IDQuNDAyNjkgOS4xNTU5NiA0LjUyOTY4IDkuMDI4OTVMMTEuNTI5NyAyLjAyODk1TDExLjYwMjcgMS45NDQ5NUMxMS43MTQzIDEuNzkyNzQgMTEuNzY0NSAxLjYwNDAyIDExLjc0MzEgMS40MTY0N0MxMS43MjE4IDEuMjI4OTEgMTEuNjMwNSAxLjA1NjMxIDExLjQ4NzQgMC45MzMxMDZDMTEuMzQ0NCAwLjgwOTkwNCAxMS4xNjAyIDAuNzQ1MTY0IDEwLjk3MTUgMC43NTE4MDhDMTAuNzgyOSAwLjc1ODQ1MSAxMC42MDM3IDAuODM1OTg5IDEwLjQ2OTcgMC45Njg5NDZaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4=");
        background-repeat: no-repeat;
        background-position: center;
        content: "";
        position: absolute;
        inset: 10%;
      }
    }
  }

  &[type="checkbox"] {
    appearance: none;
    cursor: pointer;
    display: inline-block;
    margin: 0;
    position: relative;
  }
  &[type="radio"] {
    appearance: none;
    cursor: pointer;
    display: inline-block;
    margin: 0;
    position: relative;
  }

  &[type="radio"] {
    border-radius: 50%;
    width: 16px;
    height: 16px;

    &:checked {
      border: 1px solid var(--color--brand--300);
      background: var(--color--brand--300);
    }

    &::after {
      background: white;
      content: "";
      position: absolute;
      inset: 100%;
      border-radius: 50%;
    }

    &:checked::after {
      inset: 20%;
    }
  }
}

.dremio-dark .form-control {
  background: lch(25% 10 228);
  border-color: transparent;
  color: lch(94% 2 252);
  > * {
    color: lch(94% 2 252);
  }
}
